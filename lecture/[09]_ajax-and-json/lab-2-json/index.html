<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Json workshop</title>
  <link
    rel="stylesheet"
    href="/~cs6520159/meth-shop/output.css"
  />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Afacad+Flux:wght@100..1000&display=swap" rel="stylesheet">

  <style>
    body{
      font-family: "Afacad Flux", sans-serif;
      font-optical-sizing: auto;
      font-style: normal;
    }
  </style>
</head>

<script>
  async function getData() {
    const response = await fetch('/~aws/JSON/priv_hos.json');
    const objectData = await response.json();
    console.log( objectData );
    const hospitalData = objectData.features;

    const resultCase1 = document.getElementById('result-case-1');
    const resultCase2 = document.getElementById('result-case-2');
    const resultCase3 = document.getElementById('result-case-3');
    
    hospitalData.map( (row) => {
      
      const hospitalName = `${row.properties.name}`;
      const bed = `${row.properties.num_bed}`;
      const td1 = document.createElement('td');
      td1.innerHTML = hospitalName;
      
      const td2 = document.createElement('td');
      td2.innerHTML = bed;

      const tr = document.createElement('tr');
      tr.appendChild(td1);
      tr.appendChild(td2);

      if ( bed < 30 ) {
        resultCase1.appendChild(tr);
      }else if ( bed < 90 ) {
        resultCase2.appendChild(tr);
      } else {
        resultCase3.appendChild(tr);
      }

      }
    )
  }

  getData();
</script>

<body class="p-4">
  <h1 class="text-3xl font-bold my-2">Hospital</h1>
  
  <h2 class="text-2xl"> < 30 </h2>

  <table id="result-case-1" >
    <thead>
      <th>Name</th>
      <th>Bed</th>
    </thead>
  </table>

  <h2 class="text-2xl"> < 60 </h2>
  <table id="result-case-2" >
    <thead>
      <th>Name</th>
      <th>Bed</th>
    </thead>
  </table>

  <h2 class="text-2xl"> < 90 </h2>

  <table id="result-case-3" >
    <thead>
      <th>Name</th>
      <th>Bed</th>
    </thead>
  </table>
</body>
</html>